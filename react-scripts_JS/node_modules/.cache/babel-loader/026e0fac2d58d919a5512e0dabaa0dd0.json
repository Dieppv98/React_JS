{"ast":null,"code":"var _jsxFileName = \"D:\\\\React_JS\\\\React_JS\\\\react-scripts_JS\\\\src\\\\sections\\\\@dashboard\\\\chat\\\\ChatSidebar.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom'; // @mui\n\nimport { useTheme, styled } from '@mui/material/styles';\nimport { Box, Stack, Drawer, IconButton } from '@mui/material'; // redux\n\nimport { useSelector } from '../../../redux/store'; // hooks\n\nimport useResponsive from '../../../hooks/useResponsive'; // utils\n\nimport axios from '../../../utils/axios'; // routes\n\nimport { PATH_DASHBOARD } from '../../../routes/paths'; // components\n\nimport Iconify from '../../../components/Iconify';\nimport Scrollbar from '../../../components/Scrollbar'; //\n\nimport ChatAccount from './ChatAccount';\nimport ChatSearchResults from './ChatSearchResults';\nimport ChatContactSearch from './ChatContactSearch';\nimport ChatConversationList from './ChatConversationList'; // ----------------------------------------------------------------------\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ToggleButtonStyle = styled(props => /*#__PURE__*/_jsxDEV(IconButton, {\n  disableRipple: true,\n  ...props\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 25,\n  columnNumber: 45\n}, this))(_ref => {\n  let {\n    theme\n  } = _ref;\n  return {\n    left: 0,\n    zIndex: 9,\n    width: 32,\n    height: 32,\n    position: 'absolute',\n    top: theme.spacing(13),\n    borderRadius: `0 12px 12px 0`,\n    color: theme.palette.primary.contrastText,\n    backgroundColor: theme.palette.primary.main,\n    boxShadow: theme.customShadows.primary,\n    '&:hover': {\n      backgroundColor: theme.palette.primary.darker\n    }\n  };\n}); // ----------------------------------------------------------------------\n\nconst SIDEBAR_WIDTH = 320;\nconst SIDEBAR_COLLAPSE_WIDTH = 96;\nexport default function ChatSidebar() {\n  _s();\n\n  const theme = useTheme();\n  const navigate = useNavigate();\n  const {\n    pathname\n  } = useLocation();\n  const [openSidebar, setOpenSidebar] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [isSearchFocused, setSearchFocused] = useState(false);\n  const {\n    conversations,\n    activeConversationId\n  } = useSelector(state => state.chat);\n  const isDesktop = useResponsive('up', 'md');\n  const displayResults = searchQuery && isSearchFocused;\n  const isCollapse = isDesktop && !openSidebar;\n  useEffect(() => {\n    if (!isDesktop) {\n      return handleCloseSidebar();\n    }\n\n    return handleOpenSidebar();\n  }, [isDesktop, pathname]); // eslint-disable-next-line consistent-return\n\n  useEffect(() => {\n    if (!openSidebar) {\n      return setSearchFocused(false);\n    }\n  }, [openSidebar]);\n\n  const handleOpenSidebar = () => {\n    setOpenSidebar(true);\n  };\n\n  const handleCloseSidebar = () => {\n    setOpenSidebar(false);\n  };\n\n  const handleToggleSidebar = () => {\n    setOpenSidebar(prev => !prev);\n  };\n\n  const handleClickAwaySearch = () => {\n    setSearchFocused(false);\n    setSearchQuery('');\n  };\n\n  const handleChangeSearch = async event => {\n    try {\n      const {\n        value\n      } = event.target;\n      setSearchQuery(value);\n\n      if (value) {\n        const response = await axios.get('/api/chat/search', {\n          params: {\n            query: value\n          }\n        });\n        setSearchResults(response.data.results);\n      } else {\n        setSearchResults([]);\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleSearchFocus = () => {\n    setSearchFocused(true);\n  };\n\n  const handleSearchSelect = username => {\n    setSearchFocused(false);\n    setSearchQuery('');\n    navigate(`${PATH_DASHBOARD.chat.root}/${username}`);\n  };\n\n  const handleSelectContact = result => {\n    if (handleSearchSelect) {\n      handleSearchSelect(result.username);\n    }\n  };\n\n  const renderContent = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        py: 2,\n        px: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Stack, {\n        direction: \"row\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        children: [!isCollapse && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(ChatAccount, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              flexGrow: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: handleToggleSidebar,\n          children: /*#__PURE__*/_jsxDEV(Iconify, {\n            width: 20,\n            height: 20,\n            icon: openSidebar ? 'eva:arrow-ios-back-fill' : 'eva:arrow-ios-forward-fill'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this), !isCollapse && /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: () => navigate(PATH_DASHBOARD.chat.new),\n          children: /*#__PURE__*/_jsxDEV(Iconify, {\n            icon: 'eva:edit-fill',\n            width: 20,\n            height: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), !isCollapse && /*#__PURE__*/_jsxDEV(ChatContactSearch, {\n        query: searchQuery,\n        onFocus: handleSearchFocus,\n        onChange: handleChangeSearch,\n        onClickAway: handleClickAwaySearch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Scrollbar, {\n      children: !displayResults ? /*#__PURE__*/_jsxDEV(ChatConversationList, {\n        conversations: conversations,\n        isOpenSidebar: openSidebar,\n        activeConversationId: activeConversationId,\n        sx: { ...(isSearchFocused && {\n            display: 'none'\n          })\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(ChatSearchResults, {\n        query: searchQuery,\n        results: searchResults,\n        onSelectContact: handleSelectContact\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!isDesktop && /*#__PURE__*/_jsxDEV(ToggleButtonStyle, {\n      onClick: handleToggleSidebar,\n      children: /*#__PURE__*/_jsxDEV(Iconify, {\n        width: 16,\n        height: 16,\n        icon: 'eva:people-fill'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }, this), isDesktop ? /*#__PURE__*/_jsxDEV(Drawer, {\n      open: openSidebar,\n      variant: \"persistent\",\n      sx: {\n        width: SIDEBAR_WIDTH,\n        transition: theme.transitions.create('width'),\n        '& .MuiDrawer-paper': {\n          position: 'static',\n          width: SIDEBAR_WIDTH\n        },\n        ...(isCollapse && {\n          width: SIDEBAR_COLLAPSE_WIDTH,\n          '& .MuiDrawer-paper': {\n            width: SIDEBAR_COLLAPSE_WIDTH,\n            position: 'static',\n            transform: 'none !important',\n            visibility: 'visible !important'\n          }\n        })\n      },\n      children: renderContent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Drawer, {\n      ModalProps: {\n        keepMounted: true\n      },\n      open: openSidebar,\n      onClose: handleCloseSidebar,\n      sx: {\n        '& .MuiDrawer-paper': {\n          width: SIDEBAR_WIDTH\n        }\n      },\n      children: renderContent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ChatSidebar, \"t/q4BZFusp6eThKHdyvapPLuLEw=\", false, function () {\n  return [useTheme, useNavigate, useLocation, useSelector, useResponsive];\n});\n\n_c = ChatSidebar;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatSidebar\");","map":{"version":3,"sources":["D:/React_JS/React_JS/react-scripts_JS/src/sections/@dashboard/chat/ChatSidebar.js"],"names":["useState","useEffect","useNavigate","useLocation","useTheme","styled","Box","Stack","Drawer","IconButton","useSelector","useResponsive","axios","PATH_DASHBOARD","Iconify","Scrollbar","ChatAccount","ChatSearchResults","ChatContactSearch","ChatConversationList","ToggleButtonStyle","props","theme","left","zIndex","width","height","position","top","spacing","borderRadius","color","palette","primary","contrastText","backgroundColor","main","boxShadow","customShadows","darker","SIDEBAR_WIDTH","SIDEBAR_COLLAPSE_WIDTH","ChatSidebar","navigate","pathname","openSidebar","setOpenSidebar","searchQuery","setSearchQuery","searchResults","setSearchResults","isSearchFocused","setSearchFocused","conversations","activeConversationId","state","chat","isDesktop","displayResults","isCollapse","handleCloseSidebar","handleOpenSidebar","handleToggleSidebar","prev","handleClickAwaySearch","handleChangeSearch","event","value","target","response","get","params","query","data","results","error","console","handleSearchFocus","handleSearchSelect","username","root","handleSelectContact","result","renderContent","py","px","flexGrow","new","display","transition","transitions","create","transform","visibility","keepMounted"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,kBAAzC,C,CACA;;AACA,SAASC,QAAT,EAAmBC,MAAnB,QAAiC,sBAAjC;AACA,SAASC,GAAT,EAAcC,KAAd,EAAqBC,MAArB,EAA6BC,UAA7B,QAA+C,eAA/C,C,CACA;;AACA,SAASC,WAAT,QAA4B,sBAA5B,C,CACA;;AACA,OAAOC,aAAP,MAA0B,8BAA1B,C,CACA;;AACA,OAAOC,KAAP,MAAkB,sBAAlB,C,CACA;;AACA,SAASC,cAAT,QAA+B,uBAA/B,C,CACA;;AACA,OAAOC,OAAP,MAAoB,6BAApB;AACA,OAAOC,SAAP,MAAsB,+BAAtB,C,CACA;;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,iBAAP,MAA8B,qBAA9B;AACA,OAAOC,iBAAP,MAA8B,qBAA9B;AACA,OAAOC,oBAAP,MAAiC,wBAAjC,C,CAEA;;;;AAEA,MAAMC,iBAAiB,GAAGf,MAAM,CAAEgB,KAAD,iBAAW,QAAC,UAAD;AAAY,EAAA,aAAa,MAAzB;AAAA,KAA8BA;AAA9B;AAAA;AAAA;AAAA;AAAA,QAAZ,CAAN,CAA2D;AAAA,MAAC;AAAEC,IAAAA;AAAF,GAAD;AAAA,SAAgB;AACnGC,IAAAA,IAAI,EAAE,CAD6F;AAEnGC,IAAAA,MAAM,EAAE,CAF2F;AAGnGC,IAAAA,KAAK,EAAE,EAH4F;AAInGC,IAAAA,MAAM,EAAE,EAJ2F;AAKnGC,IAAAA,QAAQ,EAAE,UALyF;AAMnGC,IAAAA,GAAG,EAAEN,KAAK,CAACO,OAAN,CAAc,EAAd,CAN8F;AAOnGC,IAAAA,YAAY,EAAG,eAPoF;AAQnGC,IAAAA,KAAK,EAAET,KAAK,CAACU,OAAN,CAAcC,OAAd,CAAsBC,YARsE;AASnGC,IAAAA,eAAe,EAAEb,KAAK,CAACU,OAAN,CAAcC,OAAd,CAAsBG,IAT4D;AAUnGC,IAAAA,SAAS,EAAEf,KAAK,CAACgB,aAAN,CAAoBL,OAVoE;AAWnG,eAAW;AACTE,MAAAA,eAAe,EAAEb,KAAK,CAACU,OAAN,CAAcC,OAAd,CAAsBM;AAD9B;AAXwF,GAAhB;AAAA,CAA3D,CAA1B,C,CAgBA;;AAEA,MAAMC,aAAa,GAAG,GAAtB;AACA,MAAMC,sBAAsB,GAAG,EAA/B;AAEA,eAAe,SAASC,WAAT,GAAuB;AAAA;;AACpC,QAAMpB,KAAK,GAAGlB,QAAQ,EAAtB;AAEA,QAAMuC,QAAQ,GAAGzC,WAAW,EAA5B;AAEA,QAAM;AAAE0C,IAAAA;AAAF,MAAezC,WAAW,EAAhC;AAEA,QAAM,CAAC0C,WAAD,EAAcC,cAAd,IAAgC9C,QAAQ,CAAC,IAAD,CAA9C;AAEA,QAAM,CAAC+C,WAAD,EAAcC,cAAd,IAAgChD,QAAQ,CAAC,EAAD,CAA9C;AAEA,QAAM,CAACiD,aAAD,EAAgBC,gBAAhB,IAAoClD,QAAQ,CAAC,EAAD,CAAlD;AAEA,QAAM,CAACmD,eAAD,EAAkBC,gBAAlB,IAAsCpD,QAAQ,CAAC,KAAD,CAApD;AAEA,QAAM;AAAEqD,IAAAA,aAAF;AAAiBC,IAAAA;AAAjB,MAA0C5C,WAAW,CAAE6C,KAAD,IAAWA,KAAK,CAACC,IAAlB,CAA3D;AAEA,QAAMC,SAAS,GAAG9C,aAAa,CAAC,IAAD,EAAO,IAAP,CAA/B;AAEA,QAAM+C,cAAc,GAAGX,WAAW,IAAII,eAAtC;AAEA,QAAMQ,UAAU,GAAGF,SAAS,IAAI,CAACZ,WAAjC;AAEA5C,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACwD,SAAL,EAAgB;AACd,aAAOG,kBAAkB,EAAzB;AACD;;AACD,WAAOC,iBAAiB,EAAxB;AACD,GALQ,EAKN,CAACJ,SAAD,EAAYb,QAAZ,CALM,CAAT,CAvBoC,CA8BpC;;AACA3C,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAAC4C,WAAL,EAAkB;AAChB,aAAOO,gBAAgB,CAAC,KAAD,CAAvB;AACD;AACF,GAJQ,EAIN,CAACP,WAAD,CAJM,CAAT;;AAMA,QAAMgB,iBAAiB,GAAG,MAAM;AAC9Bf,IAAAA,cAAc,CAAC,IAAD,CAAd;AACD,GAFD;;AAIA,QAAMc,kBAAkB,GAAG,MAAM;AAC/Bd,IAAAA,cAAc,CAAC,KAAD,CAAd;AACD,GAFD;;AAIA,QAAMgB,mBAAmB,GAAG,MAAM;AAChChB,IAAAA,cAAc,CAAEiB,IAAD,IAAU,CAACA,IAAZ,CAAd;AACD,GAFD;;AAIA,QAAMC,qBAAqB,GAAG,MAAM;AAClCZ,IAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACAJ,IAAAA,cAAc,CAAC,EAAD,CAAd;AACD,GAHD;;AAKA,QAAMiB,kBAAkB,GAAG,MAAOC,KAAP,IAAiB;AAC1C,QAAI;AACF,YAAM;AAAEC,QAAAA;AAAF,UAAYD,KAAK,CAACE,MAAxB;AACApB,MAAAA,cAAc,CAACmB,KAAD,CAAd;;AACA,UAAIA,KAAJ,EAAW;AACT,cAAME,QAAQ,GAAG,MAAMzD,KAAK,CAAC0D,GAAN,CAAU,kBAAV,EAA8B;AACnDC,UAAAA,MAAM,EAAE;AAAEC,YAAAA,KAAK,EAAEL;AAAT;AAD2C,SAA9B,CAAvB;AAGAjB,QAAAA,gBAAgB,CAACmB,QAAQ,CAACI,IAAT,CAAcC,OAAf,CAAhB;AACD,OALD,MAKO;AACLxB,QAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACD;AACF,KAXD,CAWE,OAAOyB,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACD;AACF,GAfD;;AAiBA,QAAME,iBAAiB,GAAG,MAAM;AAC9BzB,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACD,GAFD;;AAIA,QAAM0B,kBAAkB,GAAIC,QAAD,IAAc;AACvC3B,IAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACAJ,IAAAA,cAAc,CAAC,EAAD,CAAd;AACAL,IAAAA,QAAQ,CAAE,GAAE9B,cAAc,CAAC2C,IAAf,CAAoBwB,IAAK,IAAGD,QAAS,EAAzC,CAAR;AACD,GAJD;;AAMA,QAAME,mBAAmB,GAAIC,MAAD,IAAY;AACtC,QAAIJ,kBAAJ,EAAwB;AACtBA,MAAAA,kBAAkB,CAACI,MAAM,CAACH,QAAR,CAAlB;AACD;AACF,GAJD;;AAMA,QAAMI,aAAa,gBACjB;AAAA,4BACE,QAAC,GAAD;AAAK,MAAA,EAAE,EAAE;AAAEC,QAAAA,EAAE,EAAE,CAAN;AAASC,QAAAA,EAAE,EAAE;AAAb,OAAT;AAAA,8BACE,QAAC,KAAD;AAAO,QAAA,SAAS,EAAC,KAAjB;AAAuB,QAAA,UAAU,EAAC,QAAlC;AAA2C,QAAA,cAAc,EAAC,QAA1D;AAAA,mBACG,CAAC1B,UAAD,iBACC;AAAA,kCACE,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,GAAD;AAAK,YAAA,EAAE,EAAE;AAAE2B,cAAAA,QAAQ,EAAE;AAAZ;AAAT;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA,wBAFJ,eAQE,QAAC,UAAD;AAAY,UAAA,OAAO,EAAExB,mBAArB;AAAA,iCACE,QAAC,OAAD;AACE,YAAA,KAAK,EAAE,EADT;AAEE,YAAA,MAAM,EAAE,EAFV;AAGE,YAAA,IAAI,EAAEjB,WAAW,GAAG,yBAAH,GAA+B;AAHlD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBARF,EAgBG,CAACc,UAAD,iBACC,QAAC,UAAD;AAAY,UAAA,OAAO,EAAE,MAAMhB,QAAQ,CAAC9B,cAAc,CAAC2C,IAAf,CAAoB+B,GAArB,CAAnC;AAAA,iCACE,QAAC,OAAD;AAAS,YAAA,IAAI,EAAE,eAAf;AAAgC,YAAA,KAAK,EAAE,EAAvC;AAA2C,YAAA,MAAM,EAAE;AAAnD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAjBJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAwBG,CAAC5B,UAAD,iBACC,QAAC,iBAAD;AACE,QAAA,KAAK,EAAEZ,WADT;AAEE,QAAA,OAAO,EAAE8B,iBAFX;AAGE,QAAA,QAAQ,EAAEZ,kBAHZ;AAIE,QAAA,WAAW,EAAED;AAJf;AAAA;AAAA;AAAA;AAAA,cAzBJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAmCE,QAAC,SAAD;AAAA,gBACG,CAACN,cAAD,gBACC,QAAC,oBAAD;AACE,QAAA,aAAa,EAAEL,aADjB;AAEE,QAAA,aAAa,EAAER,WAFjB;AAGE,QAAA,oBAAoB,EAAES,oBAHxB;AAIE,QAAA,EAAE,EAAE,EAAE,IAAIH,eAAe,IAAI;AAAEqC,YAAAA,OAAO,EAAE;AAAX,WAAvB;AAAF;AAJN;AAAA;AAAA;AAAA;AAAA,cADD,gBAQC,QAAC,iBAAD;AAAmB,QAAA,KAAK,EAAEzC,WAA1B;AAAuC,QAAA,OAAO,EAAEE,aAAhD;AAA+D,QAAA,eAAe,EAAEgC;AAAhF;AAAA;AAAA;AAAA;AAAA;AATJ;AAAA;AAAA;AAAA;AAAA,YAnCF;AAAA,kBADF;;AAmDA,sBACE;AAAA,eACG,CAACxB,SAAD,iBACC,QAAC,iBAAD;AAAmB,MAAA,OAAO,EAAEK,mBAA5B;AAAA,6BACE,QAAC,OAAD;AAAS,QAAA,KAAK,EAAE,EAAhB;AAAoB,QAAA,MAAM,EAAE,EAA5B;AAAgC,QAAA,IAAI,EAAE;AAAtC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAFJ,EAOGL,SAAS,gBACR,QAAC,MAAD;AACE,MAAA,IAAI,EAAEZ,WADR;AAEE,MAAA,OAAO,EAAC,YAFV;AAGE,MAAA,EAAE,EAAE;AACFpB,QAAAA,KAAK,EAAEe,aADL;AAEFiD,QAAAA,UAAU,EAAEnE,KAAK,CAACoE,WAAN,CAAkBC,MAAlB,CAAyB,OAAzB,CAFV;AAGF,8BAAsB;AACpBhE,UAAAA,QAAQ,EAAE,QADU;AAEpBF,UAAAA,KAAK,EAAEe;AAFa,SAHpB;AAOF,YAAImB,UAAU,IAAI;AAChBlC,UAAAA,KAAK,EAAEgB,sBADS;AAEhB,gCAAsB;AACpBhB,YAAAA,KAAK,EAAEgB,sBADa;AAEpBd,YAAAA,QAAQ,EAAE,QAFU;AAGpBiE,YAAAA,SAAS,EAAE,iBAHS;AAIpBC,YAAAA,UAAU,EAAE;AAJQ;AAFN,SAAlB;AAPE,OAHN;AAAA,gBAqBGV;AArBH;AAAA;AAAA;AAAA;AAAA,YADQ,gBAyBR,QAAC,MAAD;AACE,MAAA,UAAU,EAAE;AAAEW,QAAAA,WAAW,EAAE;AAAf,OADd;AAEE,MAAA,IAAI,EAAEjD,WAFR;AAGE,MAAA,OAAO,EAAEe,kBAHX;AAIE,MAAA,EAAE,EAAE;AACF,8BAAsB;AAAEnC,UAAAA,KAAK,EAAEe;AAAT;AADpB,OAJN;AAAA,gBAQG2C;AARH;AAAA;AAAA;AAAA;AAAA,YAhCJ;AAAA,kBADF;AA8CD;;GAxLuBzC,W;UACRtC,Q,EAEGF,W,EAEIC,W,EAU2BO,W,EAE9BC,a;;;KAjBI+B,W","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\n// @mui\r\nimport { useTheme, styled } from '@mui/material/styles';\r\nimport { Box, Stack, Drawer, IconButton } from '@mui/material';\r\n// redux\r\nimport { useSelector } from '../../../redux/store';\r\n// hooks\r\nimport useResponsive from '../../../hooks/useResponsive';\r\n// utils\r\nimport axios from '../../../utils/axios';\r\n// routes\r\nimport { PATH_DASHBOARD } from '../../../routes/paths';\r\n// components\r\nimport Iconify from '../../../components/Iconify';\r\nimport Scrollbar from '../../../components/Scrollbar';\r\n//\r\nimport ChatAccount from './ChatAccount';\r\nimport ChatSearchResults from './ChatSearchResults';\r\nimport ChatContactSearch from './ChatContactSearch';\r\nimport ChatConversationList from './ChatConversationList';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nconst ToggleButtonStyle = styled((props) => <IconButton disableRipple {...props} />)(({ theme }) => ({\r\n  left: 0,\r\n  zIndex: 9,\r\n  width: 32,\r\n  height: 32,\r\n  position: 'absolute',\r\n  top: theme.spacing(13),\r\n  borderRadius: `0 12px 12px 0`,\r\n  color: theme.palette.primary.contrastText,\r\n  backgroundColor: theme.palette.primary.main,\r\n  boxShadow: theme.customShadows.primary,\r\n  '&:hover': {\r\n    backgroundColor: theme.palette.primary.darker,\r\n  },\r\n}));\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nconst SIDEBAR_WIDTH = 320;\r\nconst SIDEBAR_COLLAPSE_WIDTH = 96;\r\n\r\nexport default function ChatSidebar() {\r\n  const theme = useTheme();\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const { pathname } = useLocation();\r\n\r\n  const [openSidebar, setOpenSidebar] = useState(true);\r\n\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n\r\n  const [searchResults, setSearchResults] = useState([]);\r\n\r\n  const [isSearchFocused, setSearchFocused] = useState(false);\r\n\r\n  const { conversations, activeConversationId } = useSelector((state) => state.chat);\r\n\r\n  const isDesktop = useResponsive('up', 'md');\r\n\r\n  const displayResults = searchQuery && isSearchFocused;\r\n\r\n  const isCollapse = isDesktop && !openSidebar;\r\n\r\n  useEffect(() => {\r\n    if (!isDesktop) {\r\n      return handleCloseSidebar();\r\n    }\r\n    return handleOpenSidebar();\r\n  }, [isDesktop, pathname]);\r\n\r\n  // eslint-disable-next-line consistent-return\r\n  useEffect(() => {\r\n    if (!openSidebar) {\r\n      return setSearchFocused(false);\r\n    }\r\n  }, [openSidebar]);\r\n\r\n  const handleOpenSidebar = () => {\r\n    setOpenSidebar(true);\r\n  };\r\n\r\n  const handleCloseSidebar = () => {\r\n    setOpenSidebar(false);\r\n  };\r\n\r\n  const handleToggleSidebar = () => {\r\n    setOpenSidebar((prev) => !prev);\r\n  };\r\n\r\n  const handleClickAwaySearch = () => {\r\n    setSearchFocused(false);\r\n    setSearchQuery('');\r\n  };\r\n\r\n  const handleChangeSearch = async (event) => {\r\n    try {\r\n      const { value } = event.target;\r\n      setSearchQuery(value);\r\n      if (value) {\r\n        const response = await axios.get('/api/chat/search', {\r\n          params: { query: value },\r\n        });\r\n        setSearchResults(response.data.results);\r\n      } else {\r\n        setSearchResults([]);\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const handleSearchFocus = () => {\r\n    setSearchFocused(true);\r\n  };\r\n\r\n  const handleSearchSelect = (username) => {\r\n    setSearchFocused(false);\r\n    setSearchQuery('');\r\n    navigate(`${PATH_DASHBOARD.chat.root}/${username}`);\r\n  };\r\n\r\n  const handleSelectContact = (result) => {\r\n    if (handleSearchSelect) {\r\n      handleSearchSelect(result.username);\r\n    }\r\n  };\r\n\r\n  const renderContent = (\r\n    <>\r\n      <Box sx={{ py: 2, px: 3 }}>\r\n        <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"center\">\r\n          {!isCollapse && (\r\n            <>\r\n              <ChatAccount />\r\n              <Box sx={{ flexGrow: 1 }} />\r\n            </>\r\n          )}\r\n\r\n          <IconButton onClick={handleToggleSidebar}>\r\n            <Iconify\r\n              width={20}\r\n              height={20}\r\n              icon={openSidebar ? 'eva:arrow-ios-back-fill' : 'eva:arrow-ios-forward-fill'}\r\n            />\r\n          </IconButton>\r\n\r\n          {!isCollapse && (\r\n            <IconButton onClick={() => navigate(PATH_DASHBOARD.chat.new)}>\r\n              <Iconify icon={'eva:edit-fill'} width={20} height={20} />\r\n            </IconButton>\r\n          )}\r\n        </Stack>\r\n\r\n        {!isCollapse && (\r\n          <ChatContactSearch\r\n            query={searchQuery}\r\n            onFocus={handleSearchFocus}\r\n            onChange={handleChangeSearch}\r\n            onClickAway={handleClickAwaySearch}\r\n          />\r\n        )}\r\n      </Box>\r\n\r\n      <Scrollbar>\r\n        {!displayResults ? (\r\n          <ChatConversationList\r\n            conversations={conversations}\r\n            isOpenSidebar={openSidebar}\r\n            activeConversationId={activeConversationId}\r\n            sx={{ ...(isSearchFocused && { display: 'none' }) }}\r\n          />\r\n        ) : (\r\n          <ChatSearchResults query={searchQuery} results={searchResults} onSelectContact={handleSelectContact} />\r\n        )}\r\n      </Scrollbar>\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {!isDesktop && (\r\n        <ToggleButtonStyle onClick={handleToggleSidebar}>\r\n          <Iconify width={16} height={16} icon={'eva:people-fill'} />\r\n        </ToggleButtonStyle>\r\n      )}\r\n\r\n      {isDesktop ? (\r\n        <Drawer\r\n          open={openSidebar}\r\n          variant=\"persistent\"\r\n          sx={{\r\n            width: SIDEBAR_WIDTH,\r\n            transition: theme.transitions.create('width'),\r\n            '& .MuiDrawer-paper': {\r\n              position: 'static',\r\n              width: SIDEBAR_WIDTH,\r\n            },\r\n            ...(isCollapse && {\r\n              width: SIDEBAR_COLLAPSE_WIDTH,\r\n              '& .MuiDrawer-paper': {\r\n                width: SIDEBAR_COLLAPSE_WIDTH,\r\n                position: 'static',\r\n                transform: 'none !important',\r\n                visibility: 'visible !important',\r\n              },\r\n            }),\r\n          }}\r\n        >\r\n          {renderContent}\r\n        </Drawer>\r\n      ) : (\r\n        <Drawer\r\n          ModalProps={{ keepMounted: true }}\r\n          open={openSidebar}\r\n          onClose={handleCloseSidebar}\r\n          sx={{\r\n            '& .MuiDrawer-paper': { width: SIDEBAR_WIDTH },\r\n          }}\r\n        >\r\n          {renderContent}\r\n        </Drawer>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}