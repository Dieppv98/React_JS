{"ast":null,"code":"var _jsxFileName = \"D:\\\\React_JS\\\\React_JS\\\\react-scripts_JS\\\\src\\\\pages\\\\dashboard\\\\EcommerceShop.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport orderBy from 'lodash/orderBy'; // form\n\nimport { useForm } from 'react-hook-form'; // @mui\n\nimport { Container, Typography, Stack } from '@mui/material'; // redux\n\nimport { useDispatch, useSelector } from '../../redux/store';\nimport { getProducts, filterProducts } from '../../redux/slices/product'; // routes\n\nimport { PATH_DASHBOARD } from '../../routes/paths'; // hooks\n\nimport useSettings from '../../hooks/useSettings'; // components\n\nimport Page from '../../components/Page';\nimport HeaderBreadcrumbs from '../../components/HeaderBreadcrumbs';\nimport { FormProvider } from '../../components/hook-form'; // sections\n\nimport { ShopTagFiltered, ShopProductSort, ShopProductList, ShopFilterSidebar, ShopProductSearch } from '../../sections/@dashboard/e-commerce/shop';\nimport CartWidget from '../../sections/@dashboard/e-commerce/CartWidget'; // ----------------------------------------------------------------------\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function EcommerceShop() {\n  _s();\n\n  const {\n    themeStretch\n  } = useSettings();\n  const dispatch = useDispatch();\n  const [openFilter, setOpenFilter] = useState(false);\n  const {\n    products,\n    sortBy,\n    filters\n  } = useSelector(state => state.product);\n  const filteredProducts = applyFilter(products, sortBy, filters);\n  const defaultValues = {\n    gender: filters.gender,\n    category: filters.category,\n    colors: filters.colors,\n    priceRange: filters.priceRange,\n    rating: filters.rating\n  };\n  const methods = useForm({\n    defaultValues\n  });\n  const {\n    reset,\n    watch,\n    setValue\n  } = methods;\n  const values = watch();\n  const isDefault = !values.priceRange && !values.rating && values.gender.length === 0 && values.colors.length === 0 && values.category === 'All';\n  useEffect(() => {\n    dispatch(getProducts());\n  }, [dispatch]);\n  useEffect(() => {\n    dispatch(filterProducts(values));\n  }, [dispatch, values]);\n\n  const handleOpenFilter = () => {\n    setOpenFilter(true);\n  };\n\n  const handleCloseFilter = () => {\n    setOpenFilter(false);\n  };\n\n  const handleResetFilter = () => {\n    reset();\n    handleCloseFilter();\n  };\n\n  const handleRemoveGender = value => {\n    const newValue = filters.gender.filter(item => item !== value);\n    setValue('gender', newValue);\n  };\n\n  const handleRemoveCategory = () => {\n    setValue('category', 'All');\n  };\n\n  const handleRemoveColor = value => {\n    const newValue = filters.colors.filter(item => item !== value);\n    setValue('colors', newValue);\n  };\n\n  const handleRemovePrice = () => {\n    setValue('priceRange', '');\n  };\n\n  const handleRemoveRating = () => {\n    setValue('rating', '');\n  };\n\n  return /*#__PURE__*/_jsxDEV(Page, {\n    title: \"Ecommerce: Shop\",\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: themeStretch ? false : 'lg',\n      children: [/*#__PURE__*/_jsxDEV(HeaderBreadcrumbs, {\n        heading: \"Shop\",\n        links: [{\n          name: 'Dashboard',\n          href: PATH_DASHBOARD.root\n        }, {\n          name: 'E-Commerce',\n          href: PATH_DASHBOARD.eCommerce.root\n        }, {\n          name: 'Shop'\n        }]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Stack, {\n        spacing: 2,\n        direction: {\n          xs: 'column',\n          sm: 'row'\n        },\n        alignItems: {\n          sm: 'center'\n        },\n        justifyContent: \"space-between\",\n        sx: {\n          mb: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(ShopProductSearch, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Stack, {\n          direction: \"row\",\n          spacing: 1,\n          flexShrink: 0,\n          sx: {\n            my: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(FormProvider, {\n            methods: methods,\n            children: /*#__PURE__*/_jsxDEV(ShopFilterSidebar, {\n              onResetAll: handleResetFilter,\n              isOpen: openFilter,\n              onOpen: handleOpenFilter,\n              onClose: handleCloseFilter\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ShopProductSort, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Stack, {\n        sx: {\n          mb: 3\n        },\n        children: !isDefault && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            gutterBottom: true,\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: filteredProducts.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 17\n            }, this), \"\\xA0Products found\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ShopTagFiltered, {\n            filters: filters,\n            isShowReset: !isDefault && !openFilter,\n            onRemoveGender: handleRemoveGender,\n            onRemoveCategory: handleRemoveCategory,\n            onRemoveColor: handleRemoveColor,\n            onRemovePrice: handleRemovePrice,\n            onRemoveRating: handleRemoveRating,\n            onResetAll: handleResetFilter\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ShopProductList, {\n        products: filteredProducts,\n        loading: !products.length && isDefault\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CartWidget, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n} // ----------------------------------------------------------------------\n\n_s(EcommerceShop, \"adIZdhxT/OeK2ig71AdIfdF/z2s=\", false, function () {\n  return [useSettings, useDispatch, useSelector, useForm];\n});\n\n_c = EcommerceShop;\n\nfunction applyFilter(products, sortBy, filters) {\n  // SORT BY\n  if (sortBy === 'featured') {\n    products = orderBy(products, ['sold'], ['desc']);\n  }\n\n  if (sortBy === 'newest') {\n    products = orderBy(products, ['createdAt'], ['desc']);\n  }\n\n  if (sortBy === 'priceDesc') {\n    products = orderBy(products, ['price'], ['desc']);\n  }\n\n  if (sortBy === 'priceAsc') {\n    products = orderBy(products, ['price'], ['asc']);\n  } // FILTER PRODUCTS\n\n\n  if (filters.gender.length > 0) {\n    products = products.filter(product => filters.gender.includes(product.gender));\n  }\n\n  if (filters.category !== 'All') {\n    products = products.filter(product => product.category === filters.category);\n  }\n\n  if (filters.colors.length > 0) {\n    products = products.filter(product => product.colors.some(color => filters.colors.includes(color)));\n  }\n\n  if (filters.priceRange) {\n    products = products.filter(product => {\n      if (filters.priceRange === 'below') {\n        return product.price < 25;\n      }\n\n      if (filters.priceRange === 'between') {\n        return product.price >= 25 && product.price <= 75;\n      }\n\n      return product.price > 75;\n    });\n  }\n\n  if (filters.rating) {\n    products = products.filter(product => {\n      const convertRating = value => {\n        if (value === 'up4Star') return 4;\n        if (value === 'up3Star') return 3;\n        if (value === 'up2Star') return 2;\n        return 1;\n      };\n\n      return product.totalRating > convertRating(filters.rating);\n    });\n  }\n\n  return products;\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"EcommerceShop\");","map":{"version":3,"sources":["D:/React_JS/React_JS/react-scripts_JS/src/pages/dashboard/EcommerceShop.js"],"names":["useEffect","useState","orderBy","useForm","Container","Typography","Stack","useDispatch","useSelector","getProducts","filterProducts","PATH_DASHBOARD","useSettings","Page","HeaderBreadcrumbs","FormProvider","ShopTagFiltered","ShopProductSort","ShopProductList","ShopFilterSidebar","ShopProductSearch","CartWidget","EcommerceShop","themeStretch","dispatch","openFilter","setOpenFilter","products","sortBy","filters","state","product","filteredProducts","applyFilter","defaultValues","gender","category","colors","priceRange","rating","methods","reset","watch","setValue","values","isDefault","length","handleOpenFilter","handleCloseFilter","handleResetFilter","handleRemoveGender","value","newValue","filter","item","handleRemoveCategory","handleRemoveColor","handleRemovePrice","handleRemoveRating","name","href","root","eCommerce","xs","sm","mb","my","includes","some","color","price","convertRating","totalRating"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,OAAP,MAAoB,gBAApB,C,CACA;;AACA,SAASC,OAAT,QAAwB,iBAAxB,C,CACA;;AACA,SAASC,SAAT,EAAoBC,UAApB,EAAgCC,KAAhC,QAA6C,eAA7C,C,CACA;;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,mBAAzC;AACA,SAASC,WAAT,EAAsBC,cAAtB,QAA4C,4BAA5C,C,CACA;;AACA,SAASC,cAAT,QAA+B,oBAA/B,C,CACA;;AACA,OAAOC,WAAP,MAAwB,yBAAxB,C,CACA;;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,OAAOC,iBAAP,MAA8B,oCAA9B;AACA,SAASC,YAAT,QAA6B,4BAA7B,C,CACA;;AACA,SACEC,eADF,EAEEC,eAFF,EAGEC,eAHF,EAIEC,iBAJF,EAKEC,iBALF,QAMO,2CANP;AAOA,OAAOC,UAAP,MAAuB,iDAAvB,C,CAEA;;;;AAEA,eAAe,SAASC,aAAT,GAAyB;AAAA;;AACtC,QAAM;AAAEC,IAAAA;AAAF,MAAmBX,WAAW,EAApC;AAEA,QAAMY,QAAQ,GAAGjB,WAAW,EAA5B;AAEA,QAAM,CAACkB,UAAD,EAAaC,aAAb,IAA8BzB,QAAQ,CAAC,KAAD,CAA5C;AAEA,QAAM;AAAE0B,IAAAA,QAAF;AAAYC,IAAAA,MAAZ;AAAoBC,IAAAA;AAApB,MAAgCrB,WAAW,CAAEsB,KAAD,IAAWA,KAAK,CAACC,OAAlB,CAAjD;AAEA,QAAMC,gBAAgB,GAAGC,WAAW,CAACN,QAAD,EAAWC,MAAX,EAAmBC,OAAnB,CAApC;AAEA,QAAMK,aAAa,GAAG;AACpBC,IAAAA,MAAM,EAAEN,OAAO,CAACM,MADI;AAEpBC,IAAAA,QAAQ,EAAEP,OAAO,CAACO,QAFE;AAGpBC,IAAAA,MAAM,EAAER,OAAO,CAACQ,MAHI;AAIpBC,IAAAA,UAAU,EAAET,OAAO,CAACS,UAJA;AAKpBC,IAAAA,MAAM,EAAEV,OAAO,CAACU;AALI,GAAtB;AAQA,QAAMC,OAAO,GAAGrC,OAAO,CAAC;AACtB+B,IAAAA;AADsB,GAAD,CAAvB;AAIA,QAAM;AAAEO,IAAAA,KAAF;AAASC,IAAAA,KAAT;AAAgBC,IAAAA;AAAhB,MAA6BH,OAAnC;AAEA,QAAMI,MAAM,GAAGF,KAAK,EAApB;AAEA,QAAMG,SAAS,GACb,CAACD,MAAM,CAACN,UAAR,IACA,CAACM,MAAM,CAACL,MADR,IAEAK,MAAM,CAACT,MAAP,CAAcW,MAAd,KAAyB,CAFzB,IAGAF,MAAM,CAACP,MAAP,CAAcS,MAAd,KAAyB,CAHzB,IAIAF,MAAM,CAACR,QAAP,KAAoB,KALtB;AAOApC,EAAAA,SAAS,CAAC,MAAM;AACdwB,IAAAA,QAAQ,CAACf,WAAW,EAAZ,CAAR;AACD,GAFQ,EAEN,CAACe,QAAD,CAFM,CAAT;AAIAxB,EAAAA,SAAS,CAAC,MAAM;AACdwB,IAAAA,QAAQ,CAACd,cAAc,CAACkC,MAAD,CAAf,CAAR;AACD,GAFQ,EAEN,CAACpB,QAAD,EAAWoB,MAAX,CAFM,CAAT;;AAIA,QAAMG,gBAAgB,GAAG,MAAM;AAC7BrB,IAAAA,aAAa,CAAC,IAAD,CAAb;AACD,GAFD;;AAIA,QAAMsB,iBAAiB,GAAG,MAAM;AAC9BtB,IAAAA,aAAa,CAAC,KAAD,CAAb;AACD,GAFD;;AAIA,QAAMuB,iBAAiB,GAAG,MAAM;AAC9BR,IAAAA,KAAK;AACLO,IAAAA,iBAAiB;AAClB,GAHD;;AAKA,QAAME,kBAAkB,GAAIC,KAAD,IAAW;AACpC,UAAMC,QAAQ,GAAGvB,OAAO,CAACM,MAAR,CAAekB,MAAf,CAAuBC,IAAD,IAAUA,IAAI,KAAKH,KAAzC,CAAjB;AACAR,IAAAA,QAAQ,CAAC,QAAD,EAAWS,QAAX,CAAR;AACD,GAHD;;AAKA,QAAMG,oBAAoB,GAAG,MAAM;AACjCZ,IAAAA,QAAQ,CAAC,UAAD,EAAa,KAAb,CAAR;AACD,GAFD;;AAIA,QAAMa,iBAAiB,GAAIL,KAAD,IAAW;AACnC,UAAMC,QAAQ,GAAGvB,OAAO,CAACQ,MAAR,CAAegB,MAAf,CAAuBC,IAAD,IAAUA,IAAI,KAAKH,KAAzC,CAAjB;AACAR,IAAAA,QAAQ,CAAC,QAAD,EAAWS,QAAX,CAAR;AACD,GAHD;;AAKA,QAAMK,iBAAiB,GAAG,MAAM;AAC9Bd,IAAAA,QAAQ,CAAC,YAAD,EAAe,EAAf,CAAR;AACD,GAFD;;AAIA,QAAMe,kBAAkB,GAAG,MAAM;AAC/Bf,IAAAA,QAAQ,CAAC,QAAD,EAAW,EAAX,CAAR;AACD,GAFD;;AAIA,sBACE,QAAC,IAAD;AAAM,IAAA,KAAK,EAAC,iBAAZ;AAAA,2BACE,QAAC,SAAD;AAAW,MAAA,QAAQ,EAAEpB,YAAY,GAAG,KAAH,GAAW,IAA5C;AAAA,8BACE,QAAC,iBAAD;AACE,QAAA,OAAO,EAAC,MADV;AAEE,QAAA,KAAK,EAAE,CACL;AAAEoC,UAAAA,IAAI,EAAE,WAAR;AAAqBC,UAAAA,IAAI,EAAEjD,cAAc,CAACkD;AAA1C,SADK,EAEL;AACEF,UAAAA,IAAI,EAAE,YADR;AAEEC,UAAAA,IAAI,EAAEjD,cAAc,CAACmD,SAAf,CAAyBD;AAFjC,SAFK,EAML;AAAEF,UAAAA,IAAI,EAAE;AAAR,SANK;AAFT;AAAA;AAAA;AAAA;AAAA,cADF,eAaE,QAAC,KAAD;AACE,QAAA,OAAO,EAAE,CADX;AAEE,QAAA,SAAS,EAAE;AAAEI,UAAAA,EAAE,EAAE,QAAN;AAAgBC,UAAAA,EAAE,EAAE;AAApB,SAFb;AAGE,QAAA,UAAU,EAAE;AAAEA,UAAAA,EAAE,EAAE;AAAN,SAHd;AAIE,QAAA,cAAc,EAAC,eAJjB;AAKE,QAAA,EAAE,EAAE;AAAEC,UAAAA,EAAE,EAAE;AAAN,SALN;AAAA,gCAOE,QAAC,iBAAD;AAAA;AAAA;AAAA;AAAA,gBAPF,eASE,QAAC,KAAD;AAAO,UAAA,SAAS,EAAC,KAAjB;AAAuB,UAAA,OAAO,EAAE,CAAhC;AAAmC,UAAA,UAAU,EAAE,CAA/C;AAAkD,UAAA,EAAE,EAAE;AAAEC,YAAAA,EAAE,EAAE;AAAN,WAAtD;AAAA,kCACE,QAAC,YAAD;AAAc,YAAA,OAAO,EAAE1B,OAAvB;AAAA,mCACE,QAAC,iBAAD;AACE,cAAA,UAAU,EAAES,iBADd;AAEE,cAAA,MAAM,EAAExB,UAFV;AAGE,cAAA,MAAM,EAAEsB,gBAHV;AAIE,cAAA,OAAO,EAAEC;AAJX;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAUE,QAAC,eAAD;AAAA;AAAA;AAAA;AAAA,kBAVF;AAAA;AAAA;AAAA;AAAA;AAAA,gBATF;AAAA;AAAA;AAAA;AAAA;AAAA,cAbF,eAoCE,QAAC,KAAD;AAAO,QAAA,EAAE,EAAE;AAAEiB,UAAAA,EAAE,EAAE;AAAN,SAAX;AAAA,kBACG,CAACpB,SAAD,iBACC;AAAA,kCACE,QAAC,UAAD;AAAY,YAAA,OAAO,EAAC,OAApB;AAA4B,YAAA,YAAY,MAAxC;AAAA,oCACE;AAAA,wBAASb,gBAAgB,CAACc;AAA1B;AAAA;AAAA;AAAA;AAAA,oBADF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAME,QAAC,eAAD;AACE,YAAA,OAAO,EAAEjB,OADX;AAEE,YAAA,WAAW,EAAE,CAACgB,SAAD,IAAc,CAACpB,UAF9B;AAGE,YAAA,cAAc,EAAEyB,kBAHlB;AAIE,YAAA,gBAAgB,EAAEK,oBAJpB;AAKE,YAAA,aAAa,EAAEC,iBALjB;AAME,YAAA,aAAa,EAAEC,iBANjB;AAOE,YAAA,cAAc,EAAEC,kBAPlB;AAQE,YAAA,UAAU,EAAET;AARd;AAAA;AAAA;AAAA;AAAA,kBANF;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,cApCF,eA0DE,QAAC,eAAD;AAAiB,QAAA,QAAQ,EAAEjB,gBAA3B;AAA6C,QAAA,OAAO,EAAE,CAACL,QAAQ,CAACmB,MAAV,IAAoBD;AAA1E;AAAA;AAAA;AAAA;AAAA,cA1DF,eA2DE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,cA3DF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAiED,C,CAED;;GAhJwBvB,a;UACGV,W,EAERL,W,EAIqBC,W,EAYtBL,O;;;KAnBMmB,a;;AAkJxB,SAASW,WAAT,CAAqBN,QAArB,EAA+BC,MAA/B,EAAuCC,OAAvC,EAAgD;AAC9C;AACA,MAAID,MAAM,KAAK,UAAf,EAA2B;AACzBD,IAAAA,QAAQ,GAAGzB,OAAO,CAACyB,QAAD,EAAW,CAAC,MAAD,CAAX,EAAqB,CAAC,MAAD,CAArB,CAAlB;AACD;;AACD,MAAIC,MAAM,KAAK,QAAf,EAAyB;AACvBD,IAAAA,QAAQ,GAAGzB,OAAO,CAACyB,QAAD,EAAW,CAAC,WAAD,CAAX,EAA0B,CAAC,MAAD,CAA1B,CAAlB;AACD;;AACD,MAAIC,MAAM,KAAK,WAAf,EAA4B;AAC1BD,IAAAA,QAAQ,GAAGzB,OAAO,CAACyB,QAAD,EAAW,CAAC,OAAD,CAAX,EAAsB,CAAC,MAAD,CAAtB,CAAlB;AACD;;AACD,MAAIC,MAAM,KAAK,UAAf,EAA2B;AACzBD,IAAAA,QAAQ,GAAGzB,OAAO,CAACyB,QAAD,EAAW,CAAC,OAAD,CAAX,EAAsB,CAAC,KAAD,CAAtB,CAAlB;AACD,GAb6C,CAc9C;;;AACA,MAAIE,OAAO,CAACM,MAAR,CAAeW,MAAf,GAAwB,CAA5B,EAA+B;AAC7BnB,IAAAA,QAAQ,GAAGA,QAAQ,CAAC0B,MAAT,CAAiBtB,OAAD,IAAaF,OAAO,CAACM,MAAR,CAAegC,QAAf,CAAwBpC,OAAO,CAACI,MAAhC,CAA7B,CAAX;AACD;;AACD,MAAIN,OAAO,CAACO,QAAR,KAAqB,KAAzB,EAAgC;AAC9BT,IAAAA,QAAQ,GAAGA,QAAQ,CAAC0B,MAAT,CAAiBtB,OAAD,IAAaA,OAAO,CAACK,QAAR,KAAqBP,OAAO,CAACO,QAA1D,CAAX;AACD;;AACD,MAAIP,OAAO,CAACQ,MAAR,CAAeS,MAAf,GAAwB,CAA5B,EAA+B;AAC7BnB,IAAAA,QAAQ,GAAGA,QAAQ,CAAC0B,MAAT,CAAiBtB,OAAD,IAAaA,OAAO,CAACM,MAAR,CAAe+B,IAAf,CAAqBC,KAAD,IAAWxC,OAAO,CAACQ,MAAR,CAAe8B,QAAf,CAAwBE,KAAxB,CAA/B,CAA7B,CAAX;AACD;;AACD,MAAIxC,OAAO,CAACS,UAAZ,EAAwB;AACtBX,IAAAA,QAAQ,GAAGA,QAAQ,CAAC0B,MAAT,CAAiBtB,OAAD,IAAa;AACtC,UAAIF,OAAO,CAACS,UAAR,KAAuB,OAA3B,EAAoC;AAClC,eAAOP,OAAO,CAACuC,KAAR,GAAgB,EAAvB;AACD;;AACD,UAAIzC,OAAO,CAACS,UAAR,KAAuB,SAA3B,EAAsC;AACpC,eAAOP,OAAO,CAACuC,KAAR,IAAiB,EAAjB,IAAuBvC,OAAO,CAACuC,KAAR,IAAiB,EAA/C;AACD;;AACD,aAAOvC,OAAO,CAACuC,KAAR,GAAgB,EAAvB;AACD,KARU,CAAX;AASD;;AACD,MAAIzC,OAAO,CAACU,MAAZ,EAAoB;AAClBZ,IAAAA,QAAQ,GAAGA,QAAQ,CAAC0B,MAAT,CAAiBtB,OAAD,IAAa;AACtC,YAAMwC,aAAa,GAAIpB,KAAD,IAAW;AAC/B,YAAIA,KAAK,KAAK,SAAd,EAAyB,OAAO,CAAP;AACzB,YAAIA,KAAK,KAAK,SAAd,EAAyB,OAAO,CAAP;AACzB,YAAIA,KAAK,KAAK,SAAd,EAAyB,OAAO,CAAP;AACzB,eAAO,CAAP;AACD,OALD;;AAMA,aAAOpB,OAAO,CAACyC,WAAR,GAAsBD,aAAa,CAAC1C,OAAO,CAACU,MAAT,CAA1C;AACD,KARU,CAAX;AASD;;AACD,SAAOZ,QAAP;AACD","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport orderBy from 'lodash/orderBy';\r\n// form\r\nimport { useForm } from 'react-hook-form';\r\n// @mui\r\nimport { Container, Typography, Stack } from '@mui/material';\r\n// redux\r\nimport { useDispatch, useSelector } from '../../redux/store';\r\nimport { getProducts, filterProducts } from '../../redux/slices/product';\r\n// routes\r\nimport { PATH_DASHBOARD } from '../../routes/paths';\r\n// hooks\r\nimport useSettings from '../../hooks/useSettings';\r\n// components\r\nimport Page from '../../components/Page';\r\nimport HeaderBreadcrumbs from '../../components/HeaderBreadcrumbs';\r\nimport { FormProvider } from '../../components/hook-form';\r\n// sections\r\nimport {\r\n  ShopTagFiltered,\r\n  ShopProductSort,\r\n  ShopProductList,\r\n  ShopFilterSidebar,\r\n  ShopProductSearch,\r\n} from '../../sections/@dashboard/e-commerce/shop';\r\nimport CartWidget from '../../sections/@dashboard/e-commerce/CartWidget';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport default function EcommerceShop() {\r\n  const { themeStretch } = useSettings();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const [openFilter, setOpenFilter] = useState(false);\r\n\r\n  const { products, sortBy, filters } = useSelector((state) => state.product);\r\n\r\n  const filteredProducts = applyFilter(products, sortBy, filters);\r\n\r\n  const defaultValues = {\r\n    gender: filters.gender,\r\n    category: filters.category,\r\n    colors: filters.colors,\r\n    priceRange: filters.priceRange,\r\n    rating: filters.rating,\r\n  };\r\n\r\n  const methods = useForm({\r\n    defaultValues,\r\n  });\r\n\r\n  const { reset, watch, setValue } = methods;\r\n\r\n  const values = watch();\r\n\r\n  const isDefault =\r\n    !values.priceRange &&\r\n    !values.rating &&\r\n    values.gender.length === 0 &&\r\n    values.colors.length === 0 &&\r\n    values.category === 'All';\r\n\r\n  useEffect(() => {\r\n    dispatch(getProducts());\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    dispatch(filterProducts(values));\r\n  }, [dispatch, values]);\r\n\r\n  const handleOpenFilter = () => {\r\n    setOpenFilter(true);\r\n  };\r\n\r\n  const handleCloseFilter = () => {\r\n    setOpenFilter(false);\r\n  };\r\n\r\n  const handleResetFilter = () => {\r\n    reset();\r\n    handleCloseFilter();\r\n  };\r\n\r\n  const handleRemoveGender = (value) => {\r\n    const newValue = filters.gender.filter((item) => item !== value);\r\n    setValue('gender', newValue);\r\n  };\r\n\r\n  const handleRemoveCategory = () => {\r\n    setValue('category', 'All');\r\n  };\r\n\r\n  const handleRemoveColor = (value) => {\r\n    const newValue = filters.colors.filter((item) => item !== value);\r\n    setValue('colors', newValue);\r\n  };\r\n\r\n  const handleRemovePrice = () => {\r\n    setValue('priceRange', '');\r\n  };\r\n\r\n  const handleRemoveRating = () => {\r\n    setValue('rating', '');\r\n  };\r\n\r\n  return (\r\n    <Page title=\"Ecommerce: Shop\">\r\n      <Container maxWidth={themeStretch ? false : 'lg'}>\r\n        <HeaderBreadcrumbs\r\n          heading=\"Shop\"\r\n          links={[\r\n            { name: 'Dashboard', href: PATH_DASHBOARD.root },\r\n            {\r\n              name: 'E-Commerce',\r\n              href: PATH_DASHBOARD.eCommerce.root,\r\n            },\r\n            { name: 'Shop' },\r\n          ]}\r\n        />\r\n\r\n        <Stack\r\n          spacing={2}\r\n          direction={{ xs: 'column', sm: 'row' }}\r\n          alignItems={{ sm: 'center' }}\r\n          justifyContent=\"space-between\"\r\n          sx={{ mb: 2 }}\r\n        >\r\n          <ShopProductSearch />\r\n\r\n          <Stack direction=\"row\" spacing={1} flexShrink={0} sx={{ my: 1 }}>\r\n            <FormProvider methods={methods}>\r\n              <ShopFilterSidebar\r\n                onResetAll={handleResetFilter}\r\n                isOpen={openFilter}\r\n                onOpen={handleOpenFilter}\r\n                onClose={handleCloseFilter}\r\n              />\r\n            </FormProvider>\r\n\r\n            <ShopProductSort />\r\n          </Stack>\r\n        </Stack>\r\n\r\n        <Stack sx={{ mb: 3 }}>\r\n          {!isDefault && (\r\n            <>\r\n              <Typography variant=\"body2\" gutterBottom>\r\n                <strong>{filteredProducts.length}</strong>\r\n                &nbsp;Products found\r\n              </Typography>\r\n\r\n              <ShopTagFiltered\r\n                filters={filters}\r\n                isShowReset={!isDefault && !openFilter}\r\n                onRemoveGender={handleRemoveGender}\r\n                onRemoveCategory={handleRemoveCategory}\r\n                onRemoveColor={handleRemoveColor}\r\n                onRemovePrice={handleRemovePrice}\r\n                onRemoveRating={handleRemoveRating}\r\n                onResetAll={handleResetFilter}\r\n              />\r\n            </>\r\n          )}\r\n        </Stack>\r\n\r\n        <ShopProductList products={filteredProducts} loading={!products.length && isDefault} />\r\n        <CartWidget />\r\n      </Container>\r\n    </Page>\r\n  );\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nfunction applyFilter(products, sortBy, filters) {\r\n  // SORT BY\r\n  if (sortBy === 'featured') {\r\n    products = orderBy(products, ['sold'], ['desc']);\r\n  }\r\n  if (sortBy === 'newest') {\r\n    products = orderBy(products, ['createdAt'], ['desc']);\r\n  }\r\n  if (sortBy === 'priceDesc') {\r\n    products = orderBy(products, ['price'], ['desc']);\r\n  }\r\n  if (sortBy === 'priceAsc') {\r\n    products = orderBy(products, ['price'], ['asc']);\r\n  }\r\n  // FILTER PRODUCTS\r\n  if (filters.gender.length > 0) {\r\n    products = products.filter((product) => filters.gender.includes(product.gender));\r\n  }\r\n  if (filters.category !== 'All') {\r\n    products = products.filter((product) => product.category === filters.category);\r\n  }\r\n  if (filters.colors.length > 0) {\r\n    products = products.filter((product) => product.colors.some((color) => filters.colors.includes(color)));\r\n  }\r\n  if (filters.priceRange) {\r\n    products = products.filter((product) => {\r\n      if (filters.priceRange === 'below') {\r\n        return product.price < 25;\r\n      }\r\n      if (filters.priceRange === 'between') {\r\n        return product.price >= 25 && product.price <= 75;\r\n      }\r\n      return product.price > 75;\r\n    });\r\n  }\r\n  if (filters.rating) {\r\n    products = products.filter((product) => {\r\n      const convertRating = (value) => {\r\n        if (value === 'up4Star') return 4;\r\n        if (value === 'up3Star') return 3;\r\n        if (value === 'up2Star') return 2;\r\n        return 1;\r\n      };\r\n      return product.totalRating > convertRating(filters.rating);\r\n    });\r\n  }\r\n  return products;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}