{"ast":null,"code":"var _jsxFileName = \"D:\\\\React_JS\\\\React_JS\\\\react-scripts_JS\\\\src\\\\sections\\\\@dashboard\\\\chat\\\\ChatMessageList.js\",\n    _s = $RefreshSig$();\n\nimport PropTypes from 'prop-types';\nimport { useEffect, useState, useRef } from 'react'; //\n\nimport Scrollbar from '../../../components/Scrollbar';\nimport LightboxModal from '../../../components/LightboxModal';\nimport ChatMessageItem from './ChatMessageItem'; // ----------------------------------------------------------------------\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nChatMessageList.propTypes = {\n  conversation: PropTypes.object.isRequired\n};\nexport default function ChatMessageList(_ref) {\n  _s();\n\n  let {\n    conversation\n  } = _ref;\n  const scrollRef = useRef(null);\n  const [openLightbox, setOpenLightbox] = useState(false);\n  const [selectedImage, setSelectedImage] = useState(0);\n  useEffect(() => {\n    const scrollMessagesToBottom = () => {\n      if (scrollRef.current) {\n        scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n      }\n    };\n\n    scrollMessagesToBottom();\n  }, [conversation.messages]);\n  const imagesLightbox = conversation.messages.filter(messages => messages.contentType === 'image').map(messages => messages.body);\n\n  const handleOpenLightbox = url => {\n    const selectedImage = imagesLightbox.findIndex(index => index === url);\n    setOpenLightbox(true);\n    setSelectedImage(selectedImage);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Scrollbar, {\n      scrollableNodeProps: {\n        ref: scrollRef\n      },\n      sx: {\n        p: 3,\n        height: 1\n      },\n      children: conversation.messages.map(message => /*#__PURE__*/_jsxDEV(ChatMessageItem, {\n        message: message,\n        conversation: conversation,\n        onOpenLightbox: handleOpenLightbox\n      }, message.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LightboxModal, {\n      images: imagesLightbox,\n      mainSrc: imagesLightbox[selectedImage],\n      photoIndex: selectedImage,\n      setPhotoIndex: setSelectedImage,\n      isOpen: openLightbox,\n      onCloseRequest: () => setOpenLightbox(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ChatMessageList, \"mBZeTLyYgKbpPVg0bQiMJqUJp3s=\");\n\n_c = ChatMessageList;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatMessageList\");","map":{"version":3,"sources":["D:/React_JS/React_JS/react-scripts_JS/src/sections/@dashboard/chat/ChatMessageList.js"],"names":["PropTypes","useEffect","useState","useRef","Scrollbar","LightboxModal","ChatMessageItem","ChatMessageList","propTypes","conversation","object","isRequired","scrollRef","openLightbox","setOpenLightbox","selectedImage","setSelectedImage","scrollMessagesToBottom","current","scrollTop","scrollHeight","messages","imagesLightbox","filter","contentType","map","body","handleOpenLightbox","url","findIndex","index","ref","p","height","message","id"],"mappings":";;;AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,MAA9B,QAA4C,OAA5C,C,CACA;;AACA,OAAOC,SAAP,MAAsB,+BAAtB;AACA,OAAOC,aAAP,MAA0B,mCAA1B;AACA,OAAOC,eAAP,MAA4B,mBAA5B,C,CAEA;;;;AAEAC,eAAe,CAACC,SAAhB,GAA4B;AAC1BC,EAAAA,YAAY,EAAET,SAAS,CAACU,MAAV,CAAiBC;AADL,CAA5B;AAIA,eAAe,SAASJ,eAAT,OAA2C;AAAA;;AAAA,MAAlB;AAAEE,IAAAA;AAAF,GAAkB;AACxD,QAAMG,SAAS,GAAGT,MAAM,CAAC,IAAD,CAAxB;AAEA,QAAM,CAACU,YAAD,EAAeC,eAAf,IAAkCZ,QAAQ,CAAC,KAAD,CAAhD;AAEA,QAAM,CAACa,aAAD,EAAgBC,gBAAhB,IAAoCd,QAAQ,CAAC,CAAD,CAAlD;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMgB,sBAAsB,GAAG,MAAM;AACnC,UAAIL,SAAS,CAACM,OAAd,EAAuB;AACrBN,QAAAA,SAAS,CAACM,OAAV,CAAkBC,SAAlB,GAA8BP,SAAS,CAACM,OAAV,CAAkBE,YAAhD;AACD;AACF,KAJD;;AAKAH,IAAAA,sBAAsB;AACvB,GAPQ,EAON,CAACR,YAAY,CAACY,QAAd,CAPM,CAAT;AASA,QAAMC,cAAc,GAAGb,YAAY,CAACY,QAAb,CACpBE,MADoB,CACZF,QAAD,IAAcA,QAAQ,CAACG,WAAT,KAAyB,OAD1B,EAEpBC,GAFoB,CAEfJ,QAAD,IAAcA,QAAQ,CAACK,IAFP,CAAvB;;AAIA,QAAMC,kBAAkB,GAAIC,GAAD,IAAS;AAClC,UAAMb,aAAa,GAAGO,cAAc,CAACO,SAAf,CAA0BC,KAAD,IAAWA,KAAK,KAAKF,GAA9C,CAAtB;AACAd,IAAAA,eAAe,CAAC,IAAD,CAAf;AACAE,IAAAA,gBAAgB,CAACD,aAAD,CAAhB;AACD,GAJD;;AAMA,sBACE;AAAA,4BACE,QAAC,SAAD;AAAW,MAAA,mBAAmB,EAAE;AAAEgB,QAAAA,GAAG,EAAEnB;AAAP,OAAhC;AAAoD,MAAA,EAAE,EAAE;AAAEoB,QAAAA,CAAC,EAAE,CAAL;AAAQC,QAAAA,MAAM,EAAE;AAAhB,OAAxD;AAAA,gBACGxB,YAAY,CAACY,QAAb,CAAsBI,GAAtB,CAA2BS,OAAD,iBACzB,QAAC,eAAD;AAEE,QAAA,OAAO,EAAEA,OAFX;AAGE,QAAA,YAAY,EAAEzB,YAHhB;AAIE,QAAA,cAAc,EAAEkB;AAJlB,SACOO,OAAO,CAACC,EADf;AAAA;AAAA;AAAA;AAAA,cADD;AADH;AAAA;AAAA;AAAA;AAAA,YADF,eAYE,QAAC,aAAD;AACE,MAAA,MAAM,EAAEb,cADV;AAEE,MAAA,OAAO,EAAEA,cAAc,CAACP,aAAD,CAFzB;AAGE,MAAA,UAAU,EAAEA,aAHd;AAIE,MAAA,aAAa,EAAEC,gBAJjB;AAKE,MAAA,MAAM,EAAEH,YALV;AAME,MAAA,cAAc,EAAE,MAAMC,eAAe,CAAC,KAAD;AANvC;AAAA;AAAA;AAAA;AAAA,YAZF;AAAA,kBADF;AAuBD;;GAjDuBP,e;;KAAAA,e","sourcesContent":["import PropTypes from 'prop-types';\r\nimport { useEffect, useState, useRef } from 'react';\r\n//\r\nimport Scrollbar from '../../../components/Scrollbar';\r\nimport LightboxModal from '../../../components/LightboxModal';\r\nimport ChatMessageItem from './ChatMessageItem';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nChatMessageList.propTypes = {\r\n  conversation: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default function ChatMessageList({ conversation }) {\r\n  const scrollRef = useRef(null);\r\n\r\n  const [openLightbox, setOpenLightbox] = useState(false);\r\n\r\n  const [selectedImage, setSelectedImage] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const scrollMessagesToBottom = () => {\r\n      if (scrollRef.current) {\r\n        scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\r\n      }\r\n    };\r\n    scrollMessagesToBottom();\r\n  }, [conversation.messages]);\r\n\r\n  const imagesLightbox = conversation.messages\r\n    .filter((messages) => messages.contentType === 'image')\r\n    .map((messages) => messages.body);\r\n\r\n  const handleOpenLightbox = (url) => {\r\n    const selectedImage = imagesLightbox.findIndex((index) => index === url);\r\n    setOpenLightbox(true);\r\n    setSelectedImage(selectedImage);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Scrollbar scrollableNodeProps={{ ref: scrollRef }} sx={{ p: 3, height: 1 }}>\r\n        {conversation.messages.map((message) => (\r\n          <ChatMessageItem\r\n            key={message.id}\r\n            message={message}\r\n            conversation={conversation}\r\n            onOpenLightbox={handleOpenLightbox}\r\n          />\r\n        ))}\r\n      </Scrollbar>\r\n\r\n      <LightboxModal\r\n        images={imagesLightbox}\r\n        mainSrc={imagesLightbox[selectedImage]}\r\n        photoIndex={selectedImage}\r\n        setPhotoIndex={setSelectedImage}\r\n        isOpen={openLightbox}\r\n        onCloseRequest={() => setOpenLightbox(false)}\r\n      />\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}