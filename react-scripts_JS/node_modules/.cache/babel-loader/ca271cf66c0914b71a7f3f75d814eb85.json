{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit'; // utils\n\nimport axios from '../../utils/axios'; //\n\nimport { dispatch } from '../store'; // ----------------------------------------------------------------------\n\nconst initialState = {\n  isLoading: false,\n  error: null,\n  events: [],\n  isOpenModal: false,\n  selectedEventId: null,\n  selectedRange: null\n};\nconst slice = createSlice({\n  name: 'calendar',\n  initialState,\n  reducers: {\n    // START LOADING\n    startLoading(state) {\n      state.isLoading = true;\n    },\n\n    // HAS ERROR\n    hasError(state, action) {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n\n    // GET EVENTS\n    getEventsSuccess(state, action) {\n      state.isLoading = false;\n      state.events = action.payload;\n    },\n\n    // CREATE EVENT\n    createEventSuccess(state, action) {\n      const newEvent = action.payload;\n      state.isLoading = false;\n      state.events = [...state.events, newEvent];\n    },\n\n    // UPDATE EVENT\n    updateEventSuccess(state, action) {\n      const event = action.payload;\n      const updateEvent = state.events.map(_event => {\n        if (_event.id === event.id) {\n          return event;\n        }\n\n        return _event;\n      });\n      state.isLoading = false;\n      state.events = updateEvent;\n    },\n\n    // DELETE EVENT\n    deleteEventSuccess(state, action) {\n      const {\n        eventId\n      } = action.payload;\n      const deleteEvent = state.events.filter(event => event.id !== eventId);\n      state.events = deleteEvent;\n    },\n\n    // SELECT EVENT\n    selectEvent(state, action) {\n      const eventId = action.payload;\n      state.isOpenModal = true;\n      state.selectedEventId = eventId;\n    },\n\n    // SELECT RANGE\n    selectRange(state, action) {\n      const {\n        start,\n        end\n      } = action.payload;\n      state.isOpenModal = true;\n      state.selectedRange = {\n        start,\n        end\n      };\n    },\n\n    // OPEN MODAL\n    openModal(state) {\n      state.isOpenModal = true;\n    },\n\n    // CLOSE MODAL\n    closeModal(state) {\n      state.isOpenModal = false;\n      state.selectedEventId = null;\n      state.selectedRange = null;\n    }\n\n  }\n}); // Reducer\n\nexport default slice.reducer; // Actions\n\nexport const {\n  openModal,\n  closeModal,\n  selectEvent\n} = slice.actions; // ----------------------------------------------------------------------\n\nexport function getEvents() {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.get('/api/calendar/events');\n      dispatch(slice.actions.getEventsSuccess(response.data.events));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function createEvent(newEvent) {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.post('/api/calendar/events/new', newEvent);\n      dispatch(slice.actions.createEventSuccess(response.data.event));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function updateEvent(eventId, updateEvent) {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.post('/api/calendar/events/update', {\n        eventId,\n        updateEvent\n      });\n      dispatch(slice.actions.updateEventSuccess(response.data.event));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function deleteEvent(eventId) {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      await axios.post('/api/calendar/events/delete', {\n        eventId\n      });\n      dispatch(slice.actions.deleteEventSuccess({\n        eventId\n      }));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function selectRange(start, end) {\n  return async () => {\n    dispatch(slice.actions.selectRange({\n      start: start.getTime(),\n      end: end.getTime()\n    }));\n  };\n}","map":{"version":3,"sources":["D:/React_JS/React_JS/react-scripts_JS/src/redux/slices/calendar.js"],"names":["createSlice","axios","dispatch","initialState","isLoading","error","events","isOpenModal","selectedEventId","selectedRange","slice","name","reducers","startLoading","state","hasError","action","payload","getEventsSuccess","createEventSuccess","newEvent","updateEventSuccess","event","updateEvent","map","_event","id","deleteEventSuccess","eventId","deleteEvent","filter","selectEvent","selectRange","start","end","openModal","closeModal","reducer","actions","getEvents","response","get","data","createEvent","post","getTime"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\n// utils\r\nimport axios from '../../utils/axios';\r\n//\r\nimport { dispatch } from '../store';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nconst initialState = {\r\n  isLoading: false,\r\n  error: null,\r\n  events: [],\r\n  isOpenModal: false,\r\n  selectedEventId: null,\r\n  selectedRange: null,\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: 'calendar',\r\n  initialState,\r\n  reducers: {\r\n    // START LOADING\r\n    startLoading(state) {\r\n      state.isLoading = true;\r\n    },\r\n\r\n    // HAS ERROR\r\n    hasError(state, action) {\r\n      state.isLoading = false;\r\n      state.error = action.payload;\r\n    },\r\n\r\n    // GET EVENTS\r\n    getEventsSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.events = action.payload;\r\n    },\r\n\r\n    // CREATE EVENT\r\n    createEventSuccess(state, action) {\r\n      const newEvent = action.payload;\r\n      state.isLoading = false;\r\n      state.events = [...state.events, newEvent];\r\n    },\r\n\r\n    // UPDATE EVENT\r\n    updateEventSuccess(state, action) {\r\n      const event = action.payload;\r\n      const updateEvent = state.events.map((_event) => {\r\n        if (_event.id === event.id) {\r\n          return event;\r\n        }\r\n        return _event;\r\n      });\r\n\r\n      state.isLoading = false;\r\n      state.events = updateEvent;\r\n    },\r\n\r\n    // DELETE EVENT\r\n    deleteEventSuccess(state, action) {\r\n      const { eventId } = action.payload;\r\n      const deleteEvent = state.events.filter((event) => event.id !== eventId);\r\n      state.events = deleteEvent;\r\n    },\r\n\r\n    // SELECT EVENT\r\n    selectEvent(state, action) {\r\n      const eventId = action.payload;\r\n      state.isOpenModal = true;\r\n      state.selectedEventId = eventId;\r\n    },\r\n\r\n    // SELECT RANGE\r\n    selectRange(state, action) {\r\n      const { start, end } = action.payload;\r\n      state.isOpenModal = true;\r\n      state.selectedRange = { start, end };\r\n    },\r\n\r\n    // OPEN MODAL\r\n    openModal(state) {\r\n      state.isOpenModal = true;\r\n    },\r\n\r\n    // CLOSE MODAL\r\n    closeModal(state) {\r\n      state.isOpenModal = false;\r\n      state.selectedEventId = null;\r\n      state.selectedRange = null;\r\n    },\r\n  },\r\n});\r\n\r\n// Reducer\r\nexport default slice.reducer;\r\n\r\n// Actions\r\nexport const { openModal, closeModal, selectEvent } = slice.actions;\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getEvents() {\r\n  return async () => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/calendar/events');\r\n      dispatch(slice.actions.getEventsSuccess(response.data.events));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function createEvent(newEvent) {\r\n  return async () => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.post('/api/calendar/events/new', newEvent);\r\n      dispatch(slice.actions.createEventSuccess(response.data.event));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function updateEvent(eventId, updateEvent) {\r\n  return async () => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.post('/api/calendar/events/update', {\r\n        eventId,\r\n        updateEvent,\r\n      });\r\n      dispatch(slice.actions.updateEventSuccess(response.data.event));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function deleteEvent(eventId) {\r\n  return async () => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      await axios.post('/api/calendar/events/delete', { eventId });\r\n      dispatch(slice.actions.deleteEventSuccess({ eventId }));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function selectRange(start, end) {\r\n  return async () => {\r\n    dispatch(\r\n      slice.actions.selectRange({\r\n        start: start.getTime(),\r\n        end: end.getTime(),\r\n      })\r\n    );\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}